import{j as e,k as f,y as g,c as j,z as E,r as ie,$ as oe,a0 as K,t as X,I as M,a1 as $,a2 as re,a3 as q,G as Y,a4 as le,n as B,a5 as I,F as v,a6 as y,a7 as H,a8 as ce,a9 as de,aa as ue,Y as C,B as T,V as he,i as me,L as pe,ab as xe}from"./index-61c6d7bb.js";import{r as l,b as R}from"./vendor-5d1559fa.js";import{A as L,d as k,u as fe,C as ge,b as je,P as G}from"./chevron-double-left-ee0e84e0.js";function ye(t){const a=l.useRef(t);return a.current=t,a}function be(t,a=0){const n=l.useRef(null),s=ye(t),i=l.useCallback((...c)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{var r;n.current=null,(r=s.current)==null||r.call(s,...c)},a)},[a]),o=l.useCallback(()=>{n.current&&clearTimeout(n.current)},[]);return[i,o]}function J(t,a){return t[0]===a[0]&&t[1]===a[1]}function ve(t){var a;return((a=t.getPath)==null?void 0:a.call(t))??`${t.getName().toLowerCase()}`}const Q={getName:()=>L.displayName,getDescription:function(){return e.jsxs(e.Fragment,{children:[e.jsx(f,{children:L.displayName}),"Добавьте описание"]})},element:function(a){const{state:{portalSourceIntoContainer:n,containerRelative:s,...i}}=a,[o,c]=l.useState(),[r,u]=l.useState();return e.jsx("div",{style:{overflow:"hidden",width:"100%",height:"100%"},ref:u,children:e.jsxs("div",{style:{padding:"200px 0 0 500px",border:s?"1px solid red":"1px solid blue",position:s?"relative":void 0},children:[e.jsx("button",{ref:g(c),children:"Target"}),o&&e.jsx(L,{targetElement:o,containerElement:n?r:void 0,...i,children:e.jsx("div",{style:{width:"400px",height:"100px",background:"red"},children:"Source"})})]})})},controls:[{name:"sourcePoint",path:["points",0],input:"select",options:["bc","bl","br","tc","tl","tr","cc","cl","cr"],defaultValue:"cr",style:{width:"200px"}},{name:"targetPoint",path:["points",1],input:"select",options:["bc","bl","br","tc","tl","tr","cc","cl","cr"],defaultValue:"cl",style:{width:"200px"}},{name:"portalSourceIntoContainer",input:"checkbox",defaultValue:!1},{name:"containerRelative",input:"checkbox",defaultValue:!1},{name:"adjustX",path:["overflow","adjustX"],input:"checkbox",defaultValue:!1},{name:"adjustY",path:["overflow","adjustY"],input:"checkbox",defaultValue:!1},{name:"alwaysByViewport",path:["overflow","alwaysByViewport"],input:"checkbox",defaultValue:!1}]};function Ne(t){return t==="tl"?["-100%","-50%"]:t==="tr"?["100%","-50%"]:t==="tc"?[0,"-50%"]:t==="bl"?["-100%","50%"]:t==="br"?["100%","50%"]:t==="bc"?[0,"50%"]:t==="cr"?["50%",0]:t==="cl"?["-50%",0]:[0,0]}function Z(t){return t.charAt(0)==="c"?[k.flipPointHorizontally(t),t]:[k.flipPointHorizontally(k.flipPointVertically(t)),k.flipPointHorizontally(t)]}b.displayName="a-Popover";function b(t){const a=u(),n=R.useRef(null),[s,i]=R.useState(null),o=j(t.className,b.displayName),c=d(t.renderContent,n,{...t,...t.contentProps,className:o}),r=d(t.renderTarget,i,void 0);return fe(n,E(t.onClickOutside,t.onClose)),ie("keydown",oe({key:"Escape"},E(t.onEscKeyDown,t.onClose))),e.jsxs(e.Fragment,{children:[r,t.opened&&s&&e.jsx(L,{onAligned:E(t.onAligned),targetElement:s,points:a,overflow:t.overflow,containerElement:t.containerElement,deps:t.deps,offset:t.offset,children:c})]});function u(){return t.points?t.points:t.placement?Z(t.placement):["tc","bc"]}function d(h,p,x){return R.createElement(h,{ref:p,...t,...x})}}z.displayName="a-Balloon";function z(t,a){const{renderArrow:n,placement:s="tc",contentProps:i,children:o,...c}=t,[r,u]=R.useState(null),d=l.useRef(null);return e.jsx("div",{...c,ref:g(u,a,h),className:j(c.className,z.displayName),children:e.jsx(b,{opened:!0,placement:p(s),offset:Ne(s),containerElement:r,renderContent:n,renderTarget:l.forwardRef(function(V,N){return e.jsx("div",{...i,ref:g(N,d,h),children:o})})})});function h(){var N,w;if(!r||!d.current)return;const x=(N=K(d.current))==null?void 0:N.width,V=(w=K(d.current))==null?void 0:w.height;X(x),X(V),r.style.width=x,r.style.height=V}function p(x){return x.charAt(0)==="c"?k.flipPointHorizontally(x):k.flipPointVertically(x)}}const ee=l.forwardRef(z);ee.displayName=z.displayName;const A=ee,we={getName:()=>A.displayName||"",getDescription:function(){return e.jsxs(e.Fragment,{children:[e.jsx(f,{children:A.displayName}),"Добавьте описание"]})},element:function(a){const{state:n}=a;return e.jsx(A,{contentProps:{style:{background:"red",position:"absolute",zIndex:2}},renderArrow:l.forwardRef(function(i,o){return e.jsx("div",{ref:g(o),style:{position:"absolute",background:"blue",width:"10px",height:"10px",transform:"rotate(45deg)",zIndex:1}})}),...n,children:e.jsx("div",{style:{width:"200px",height:"200px"},children:"Content"})})},controls:[{name:"placement",input:"select",options:["bc","bl","br","tc","tl","tr","cc","cl","cr"],defaultValue:"cr",style:{width:"200px"}}]},Ce={getName:()=>M.displayName||"",getDescription:function(){return e.jsxs(e.Fragment,{children:[e.jsx(f,{children:M.displayName}),"Размер `foreignObject` подстраивается под размер детей"]})},element:function(a){const{state:{contentAdded:n,...s}}=a;return e.jsx("svg",{width:"100%",height:"100%",style:{border:"1px solid red"},children:e.jsx(M,{dataId:"test",...s,children:e.jsxs("div",{style:{border:"1px solid blue"},children:["Hello"," ",n&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"World"]})]})})})},controls:[{name:"x",input:"input",defaultValue:20,width:"200px",type:"number"},{name:"y",input:"input",defaultValue:20,width:"200px",type:"number"},{name:"contentAdded",input:"checkbox",defaultValue:!0}]},U={id:"id1",name:"name1",level:"decisionPoint",computation:"parallel",x:10,y:10},ke={getName:()=>$.displayName||"",getDescription:function(){return e.jsxs(e.Fragment,{children:[e.jsx(f,{children:$.displayName}),"Добавьте описание"]})},element:function(a){const n=l.useMemo(()=>new re(U),[]),s=new q([U]),{state:i}=a;return e.jsx("svg",{width:"100%",height:"100%",style:{border:"1px solid red"},children:e.jsx($,{...i,listState:s,state:n,toolbar:e.jsxs("div",{style:{display:"flex",justifyContent:"end",padding:"var(--s)"},children:[e.jsx(Y,{height:"s",style:{padding:"var(--l)"},children:"Toolbar"}),e.jsx(Y,{height:"s",square:!0,children:e.jsx(le,{})})]}),title:e.jsx(B,{height:"l",value:"title",onChange:I}),targetLinks:e.jsxs(v,{style:{border:"1px solid blue"},gap:"xxl",dir:"column",padding:"var(--xxl) .2rem",children:[e.jsx(y,{variant:"linked",linkId:"test1"}),e.jsx(y,{variant:"new",linkId:"test"})]}),sourceLinks:e.jsx(v,{gap:"xxl",width:"100%",dir:"column",padding:"var(--l) .2rem",children:e.jsxs("div",{style:{display:"flex",width:"100%",height:"40px",padding:"0 0.2rem 0 1rem",justifyContent:"space-between",alignItems:"center",background:"grey"},children:[e.jsx("span",{children:"Rule"})," ",e.jsx(y,{variant:"unlinked",linkId:"test"})]})}),onGestureDrug:o=>{const c=n.position.start.x+o.movement[0],r=n.position.start.y+o.movement[1];n.position.move({x:c,y:r},o)},style:{border:"1px solid red",width:"300px"}})})},controls:[]},Pe={id:"id1",name:"name1",level:"decisionPoint",computation:"parallel",x:10,y:10},Ee={id:"id2",name:"name2",level:"decisionPoint",computation:"parallel",x:510,y:10},De={getName:()=>H.displayName||"",getDescription:function(){return e.jsxs(e.Fragment,{children:[e.jsx(f,{children:H.displayName}),"Добавьте описание"]})},element:function(a){const n=l.useMemo(()=>new q([Pe,Ee]),[]),s=l.useMemo(()=>new ce([{id:"id1",name:"name",sourceId:"id1",targetId:"id2",i:1}]),[]);return e.jsx("svg",{width:"100%",height:"100%",style:{border:"1px solid red"},children:e.jsx(de,{backend:ue,children:n.values().map(i=>l.createElement(H,{...a,nodeListState:n,key:i.id,state:i,linkListState:s,remove:()=>console.log("remove!"),onGestureDrug:o=>{const c=i.position.start.x+o.movement[0],r=i.position.start.y+o.movement[1];i.position.move({x:c,y:r},o)}}))})})},controls:[]};m.displayName="ui-Labeled";function m(t){const{label:a,htmlFor:n,direction:s="vertical",children:i,className:o,labelProps:c,hidden:r,...u}=t;return e.jsxs("div",{...u,"aria-hidden":r,className:j(o,m.displayName,`--${s}`,r&&"--hidden"),children:[e.jsx("label",{className:"label",...c,htmlFor:n,children:t.label}),i]})}const Ve={getName:()=>y.displayName||"",getDescription:function(){return e.jsxs(e.Fragment,{children:[e.jsx(f,{children:y.displayName}),"Добавьте описание"]})},element:function(a){const{state:n}=a;return e.jsxs(e.Fragment,{children:[e.jsx(m,{label:"new",children:e.jsx(y,{linkId:"test",variant:"new",...n})}),e.jsx(m,{label:"linked",children:e.jsx(y,{linkId:"test",variant:"linked",...n})}),e.jsx(m,{label:"unlinked",children:e.jsx(y,{linkId:"test",variant:"unlinked",...n})})]})},controls:[]},Ie={getName:()=>C.displayName,getDescription:function(){return e.jsxs(e.Fragment,{children:[e.jsx(f,{children:C.displayName}),"Добавьте описание"]})},element:function(a){const{state:n}=a;return e.jsxs(v,{dir:"column",gap:"xl",width:"100%",children:[e.jsx(m,{label:"unchecked",children:e.jsx(C,{height:"s",placeholder:"placeholder",...n,onChange:I})}),e.jsx(m,{label:"checked",children:e.jsx(C,{checked:!0,height:"s",placeholder:"placeholder",...n,onChange:I})}),e.jsx(m,{label:"disabled",children:e.jsx(C,{disabled:!0,height:"s",placeholder:"placeholder",...n,onChange:I})}),e.jsx(m,{label:"checked disabled",children:e.jsx(C,{checked:!0,disabled:!0,height:"s",placeholder:"placeholder",...n,onChange:I})})]})},controls:[{name:"round",input:"checkbox",defaultValue:!0}]},Re={getName:()=>m.displayName,getDescription:function(){return e.jsxs(e.Fragment,{children:[e.jsx(f,{children:m.displayName}),"Добавьте описание"]})},element:function(a){const{state:n}=a;return e.jsxs(v,{dir:"column",gap:"xl",width:"100%",children:[e.jsx(m,{htmlFor:"test2",label:"Long name",...n,children:e.jsx(B,{placeholder:"Please enter your long name"})}),e.jsx(m,{htmlFor:"test",label:"Test",...n,children:e.jsx(B,{placeholder:"Test"})})]})},controls:[{name:"direction",input:"select",options:["horizontal","vertical"],defaultValue:"vertical",style:{width:"200px"}},{name:"hidden",input:"checkbox",defaultValue:!1}]};function P(t="",a=0){return typeof t=="number"?Number.isNaN(t)?a:t:parseInt(t,10)||a}function Ae(t="",a){const[n,s]=l.useState(t),[i,o]=l.useState(t);l.useEffect(()=>{i!==t&&(s(t),o(t))},[t,i]);const c=l.useCallback(u=>{s(u.target.value)},[]),r=l.useCallback(u=>{if(u.key==="Enter"){const d=u.target.value;o(d),a(parseInt(d||"",10))()}},[i]);return[n,c,r]}W.displayName="ui-PageCounter";function W(t){var d;const[a,n,s]=Ae((d=t.page)==null?void 0:d.toString(),u),i=P(t.total),o=P(t.size),c=P(t.page),r=Math.ceil(i/o);function u(h){return()=>{var p;h!==c&&t.onChange&&h>=1&&h<=r&&((p=t.onChange)==null||p.call(t,h))}}if(c<1)throw Error("Page cannot be less than 1");return e.jsx("div",{className:j(t.className,W.displayName),children:!!t.total&&e.jsxs(e.Fragment,{children:[e.jsx(T,{round:!0,disabled:t.page===1,onClick:u(1),children:e.jsx(ge,{})}),e.jsx(T,{round:!0,disabled:t.page===1,onClick:u(c-1),children:e.jsx(he,{})}),e.jsx(B,{onKeyUp:s,onChange:n,style:{width:"50px",textAlign:"center"},value:P(a,0).toString(),onFocus:()=>{var h;(h=document.activeElement)==null||h.select()},autoComplete:"off"}),e.jsx(T,{round:!0,disabled:c>=r,onClick:u(c+1),children:e.jsx(me,{})}),e.jsx(T,{round:!0,disabled:c>=r,onClick:u(r),children:e.jsx(je,{})})]})})}S.displayName="ui-Paginator";function S(t){const a=P(t.total),n=P(t.size),s=Math.ceil(a/n);return e.jsxs("div",{className:j(S.displayName),children:[e.jsx(W,{...t}),e.jsx("div",{className:"info",children:!!t.total&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["всего страниц: ",s]}),e.jsxs("div",{children:["всего элементов: ",a]})]})})]})}const Se={getName:()=>S.displayName,getDescription:function(){return e.jsxs(e.Fragment,{children:[e.jsx(f,{children:S.displayName}),"Добавьте описание"]})},element:function(a){const{state:n,setState:s}=a;return e.jsx(v,{dir:"column",gap:"xl",width:"100%",children:e.jsx(S,{size:10,total:3e3,onChange:i=>s(o=>({...o,page:i})),...n})})},controls:[{name:"page",input:"input",defaultValue:1,width:"200px",type:"number"}]};O.displayName="ConfigLink";function O(t){return e.jsx(pe,{className:j(t.className,O.displayName),to:`/project-with-tree/story/${ve(t.config)}`,children:t.config.getName()})}const Fe={getName:()=>b.displayName,getDescription:function(){return e.jsxs(e.Fragment,{children:[e.jsx(f,{children:b.displayName}),e.jsxs(G,{children:["Расширяет ",e.jsx(O,{config:Q})]}),e.jsx(G,{children:"Должен мгновенно менять цвет и положение при `adjustX === true` если происходит перепозиционирование"})]})},element:function(a){const{state:{portalSourceIntoContainer:n,containerRelative:s,...i}}=a,[o,c]=l.useState(),[r,u]=l.useState(["tl","tc"]);return e.jsx("div",{style:{width:"100%",height:"100%"},children:e.jsx("div",{ref:c,style:{overflow:"hidden",border:s?"1px solid red":"1px solid blue",position:s?"relative":void 0,padding:"200px 0 0 500px"},children:e.jsx(b,{onAligned:d=>{J(d.adjustedPoints,r)||u(d.adjustedPoints)},renderContent:l.forwardRef(function(h,p){return e.jsxs("div",{ref:g(p),style:{width:"400px",height:"100px",background:r[0]==="cl"?"red":"blue"},children:["Points ",r.join(" - ")]})}),renderTarget:l.forwardRef(function(h,p){return e.jsx("button",{ref:g(p),style:{background:r[0]==="cl"?"red":"blue"},children:"Target"})}),containerElement:n?o:void 0,...i})})})},controls:[{name:"opened",input:"checkbox",defaultValue:!0},{name:"placement",input:"select",options:["bc","bl","br","tc","tl","tr","cc","cl","cr"],defaultValue:"cr",style:{width:"200px"}},{name:"portalSourceIntoContainer",input:"checkbox",defaultValue:!1},{name:"adjustX",path:["overflow","adjustX"],input:"checkbox",defaultValue:!1},{name:"adjustY",path:["overflow","adjustY"],input:"checkbox",defaultValue:!1},{name:"alwaysByViewport",path:["overflow","alwaysByViewport"],input:"checkbox",defaultValue:!1}]};D.displayName="a-Tooltip";function D(t){const{delay:a=300,placement:n="tc",balloonProps:s,children:i,className:o,renderBalloon:c,...r}=t,[u,d]=l.useState(!1),[h,p]=be(()=>d(!0),a),x=Z(n),[V,N]=l.useState(x);return e.jsx(b,{...r,opened:u,points:x,onEscKeyDown:E(t.onClose,()=>d(!1)),className:j(o,D.displayName),contentProps:s,renderContent:c,onAligned:w=>{J(w.adjustedPoints,V)||N(w.adjustedPoints)},renderTarget:l.forwardRef(function(ze,ne){const{onMouseMoveCapture:ae,onMouseLeave:se}=i.props;return R.cloneElement(i,{onMouseMoveCapture:E(ae,h),onMouseLeave:E(se,t.onClose,p,()=>d(!1)),ref:g(i.ref,ne)})})})}const Te={getName:()=>D.displayName,getDescription:function(){return e.jsxs(e.Fragment,{children:[e.jsx(f,{children:D.displayName}),"Добавьте описание"]})},element:function(a){const{state:n}=a;return e.jsx(v,{dir:"column",gap:"xl",width:"100%",children:e.jsx(D,{className:"story-Tooltip",renderBalloon:l.forwardRef(function(i,o){const c=n.placement;return e.jsx(A,{className:j(i.className),placement:c,ref:g(o),contentProps:{style:{background:"red",position:"absolute",zIndex:2}},renderArrow:l.forwardRef(function(u,d){return e.jsx("div",{ref:g(d),style:{position:"absolute",background:"blue",width:"10px",height:"10px",transform:"rotate(45deg)",zIndex:1}})}),children:e.jsx("div",{style:{width:"200px",height:"200px"},children:"Content"})})}),...n,children:e.jsx("button",{children:"Hello"})})})},controls:[{name:"placement",input:"select",options:["bc","bl","br","tc","tl","tr","cc","cl","cr"],defaultValue:"tl",style:{width:"200px"}},{name:"delay",input:"input",defaultValue:300,width:"200px",type:"number"}]};F.displayName="ui-Tooltip";function F(t){const{delay:a=500,placement:n="tc",content:s,className:i,...o}=t;return e.jsx(D,{...o,delay:a,className:j(i,F.displayName),placement:n,renderBalloon:te,balloonProps:{content:s,placement:n}})}function Le(t){const a={x:0,y:0},n={x:0,y:0};return t.charAt(0)==="b"?(a.y=-5,n.y=5,{from:a,to:n}):t.charAt(0)==="t"?(a.y=5,n.y=-5,{from:a,to:n}):t.charAt(1)==="l"?(a.x=5,n.x=-5,{from:a,to:n}):t.charAt(1)==="r"?(a.x=-5,n.x=5,{from:a,to:n}):{from:a,to:n}}_.displayName="ui-Tooltip-w-Balloon";function _(t,a){return e.jsx(xe,{duration:100,...Le(t.placement),style:{position:"fixed",zIndex:1},children:e.jsx(A,{className:j(t.className),placement:t.placement,ref:g(a),contentProps:{className:"content",style:{position:"absolute"}},renderArrow:l.forwardRef(function(s,i){return e.jsx("div",{className:"arrow",ref:g(i),style:{position:"absolute"}})}),children:t.content})})}const te=l.forwardRef(_);te.displayName=_.displayName;const Be={getName:()=>F.displayName,getDescription:function(){return e.jsxs(e.Fragment,{children:[e.jsx(f,{children:F.displayName}),"Добавьте описание"]})},element:function(a){const{state:n}=a;return e.jsx(v,{dir:"column",gap:"xl",width:"100%",children:e.jsx(F,{content:"World",...n,children:e.jsx("button",{children:"Hello"})})})},controls:[{name:"placement",input:"select",options:["bc","bl","br","tc","tl","tr","cc","cl","cr"],defaultValue:"tc",style:{width:"200px"}},{name:"delay",input:"input",defaultValue:300,width:"200px",type:"number"}]},We=[["Align",Q],["Balloon",we],["Canvas",Ce,ke,Ve,De],["Checkbox",Ie],["Labeled",Re],["Paginator",Se],["Popover",Fe],["Tooltip",Te,Be]];export{O as C,m as L,ve as c,We as r};
